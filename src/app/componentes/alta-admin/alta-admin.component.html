<app-menu></app-menu>
<div fxLayout="row" fxLayoutAlign="center">
    <mat-card class="main mat-elevation-z8">
        <mat-card-header>
            <mat-card-title>Alta Administrador</mat-card-title>
        </mat-card-header>
        <form [formGroup]="form">
            <mat-card-content fxLayout="column">
                <mat-form-field appearance="outline">
                    <mat-label>Nombre</mat-label>
                    <input formControlName="nombre" matInput
                        [ngClass]="{ 'is-invalid': submitted && f.nombre.errors }">
                    <div *ngIf="submitted && f.nombre.errors" class="invalid-feedback">
                        <div *ngIf="f.nombre.errors.required">Debe ingresar un nombre</div>
                    </div>
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Apellido</mat-label>
                    <input formControlName="apellido" matInput
                        [ngClass]="{ 'is-invalid': submitted && f.apellido.errors }">
                    <div *ngIf="submitted && f.apellido.errors" class="invalid-feedback">
                        <div *ngIf="f.apellido.errors.required">Debe ingresar un apellido</div>
                    </div>
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Correo</mat-label>
                    <input formControlName="correo" matInput
                        [ngClass]="{ 'is-invalid': submitted && f.correo.errors }">
                    <mat-icon matSuffix>account_circle</mat-icon>
                    <div *ngIf="submitted && f.correo.errors" class="invalid-feedback">
                        <div *ngIf="f.correo.errors.required">Debe ingresar un correo</div>
                    </div>
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Clave</mat-label>
                    <input formControlName="clave" [type]="hide ? 'password' : 'text'" matInput
                        [ngClass]="{ 'is-invalid': submitted && f.clave.errors }">
                    <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                        [attr.aria-pressed]="hide">
                        <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                    <div *ngIf="submitted && f.clave.errors" class="invalid-feedback">
                        <div *ngIf="f.clave.errors.required">Debe ingresar una clave</div>
                        <div *ngIf="f.clave.errors.minlength">La clave debe tener al menos 6 caracteres</div>
                    </div>
                </mat-form-field>
            </mat-card-content>
            <mat-card-actions>
                <button [disabled]="loading || form.invalid" mat-raised-button color="primary"
                    (click)="registrar()">
                    <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
                    Crear usuario
                </button>
                <button routerLink="/Principal" mat-raised-button color="warn">
                    Cancelar
                </button>
            </mat-card-actions>
        </form>
    </mat-card>
</div>